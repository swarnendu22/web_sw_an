<div class="top-bar box-shadow">
  <div class="d-flex align-items-center">
    <div class="mr-auto">
      <h3 class="m-subheader__title"> {{this.pageDetail.pageTitle}} </h3>
    </div>
    <div class="">
      <button type="button" [routerLink]="['/merchant/delivery-request']" mat-raised-button class="noshadow top-btn-font white-btn custom-bak-btn">
        <mat-icon>arrow_back</mat-icon> Back
      </button>
    </div>
  </div>
</div>

<div class="box-shadow bg-white padding-10 hoz-form" id="basicDetailsForm">
  <form [formGroup]="basicDetailsForm" (ngSubmit)="onSubmit('basicDetailsForm')">

    <div class="content-head">
      <div class="content-head-caption">
        <h3>#{{this.basicDetailsForm.get('status').value}}</h3>
      </div>
      <div class="content-head-action">
        <div class="form-header-btn" *ngIf="!approveMode">
          <ng-container *ngIf="getFormDisableStats('basicDetailsForm')">
            <button type="button" mat-raised-button class="noshadow top-btn-font white-btn" (click)="toggleFormDisable('basicDetailsForm')">
              <mat-icon>edit</mat-icon> Edit
            </button>
          </ng-container>
          <ng-container *ngIf="!getFormDisableStats('basicDetailsForm')">
            <button type="button" mat-raised-button class="noshadow top-btn-font white-btn" (click)="toggleFormDisable('basicDetailsForm')">
              <mat-icon>cancel</mat-icon> Cancel
            </button>
            <button mat-raised-button class="btn-success">Submit
            </button>
          </ng-container>
        </div>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-sm-6">
        <mat-form-field appearance="outline">
          <mat-label>Store Name
            <span matTooltip="This field is Required" aria-label="This field is Required" class="mandatory">*</span>
          </mat-label>
          <input matInput formControlName="storeName" trim="blur" [readonly]="true" />
          <span *ngIf="!basicDetailsForm.get('storeName').valid && basicDetailsForm.get('storeName').touched" matTooltipClass="downline"
            matTooltip="This is required Field" aria-label="This field is Required" class="mandatory-alert">
            <mat-icon fontSet="material-icons-outlined">info</mat-icon>
          </span>
        </mat-form-field>

        <ng-container *ngIf="approveMode">
          <mat-hint align="start" class="request_class" *ngIf="requestObj['storeName']">
            <span *ngIf="requestObj['storeName'] !== basicDetailsForm.get('storeName').value">Requested Change: {{requestObj['storeName']}}
            </span>
          </mat-hint>
        </ng-container>

        <mat-form-field appearance="outline">
          <mat-label>Support No
            <span matTooltip="This field is Required" aria-label="This field is Required" class="mandatory">*</span>
          </mat-label>
          <input matInput formControlName="supportNumber" trim="blur" [readonly]="true" />
          <span *ngIf="!basicDetailsForm.get('supportNumber').valid && basicDetailsForm.get('supportNumber').touched" matTooltipClass="downline"
            matTooltip="This is required Field" aria-label="This field is Required" class="mandatory-alert">
            <mat-icon fontSet="material-icons-outlined">info</mat-icon>
          </span>
        </mat-form-field>

        <ng-container *ngIf="approveMode">
          <mat-hint align="start" class="request_class" *ngIf="requestObj['supportNumber']">
            <span *ngIf="requestObj['supportNumber'] !== basicDetailsForm.get('supportNumber').value">Requested Change: {{requestObj['supportNumber']}}
            </span>
          </mat-hint>
        </ng-container>

      </div>

      <div class="col-sm-6">

        <mat-form-field appearance="outline">
          <mat-label>Contact Number
            <span matTooltip="This field is Required" aria-label="This field is Required" class="mandatory">*</span>
          </mat-label>
          <input type="text" autocomplete="nope" [readonly]="true" formControlName="contactNumber" matInput numbersOnly trim="blur"
          />

          <ng-container *ngIf="!basicDetailsForm.get('contactNumber').valid && basicDetailsForm.get('contactNumber').touched">
            <span *ngIf="!basicDetailsForm.get('contactNumber').hasError('required')" matTooltipClass="downline" matTooltip="This is required Field"
              aria-label="This field is Required" class="mandatory-alert">
              <mat-icon fontSet="material-icons-outlined">info</mat-icon>
            </span>

            <span *ngIf="!basicDetailsForm.get('contactNumber').hasError('maxlength')" matTooltipClass="downline" matTooltip="Invalid mobile no"
              aria-label="This field is Required" class="mandatory-alert">
              <mat-icon fontSet="material-icons-outlined">info</mat-icon>
            </span>
          </ng-container>

        </mat-form-field>

        <ng-container *ngIf="approveMode">
          <mat-hint align="start" class="request_class" *ngIf="requestObj['contactNumber']">
            <span *ngIf="requestObj['contactNumber'] !== basicDetailsForm.get('contactNumber').value">Requested Change: {{requestObj['contactNumber']}}
            </span>
          </mat-hint>
        </ng-container>

        <mat-form-field appearance="outline">
          <mat-label>Registered Email
            <span matTooltip="This field is Required" aria-label="This field is Required" class="mandatory">*</span>
          </mat-label>
          <input type="email" [readonly]="true" matInput formControlName="storeEmail" trim="blur" />

          <ng-container *ngIf="!basicDetailsForm.get('storeEmail').valid && basicDetailsForm.get('storeEmail').touched">

            <span *ngIf="!basicDetailsForm.get('storeEmail').hasError('required')" matTooltipClass="downline" matTooltip="This is required Field"
              aria-label="This field is Required" class="mandatory-alert">
              <mat-icon fontSet="material-icons-outlined">info</mat-icon>
            </span>

            <span *ngIf="!basicDetailsForm.get('storeEmail').hasError('pattern')" matTooltipClass="downline" matTooltip="Invalid Email Id"
              aria-label="This field is Required" class="mandatory-alert">
              <mat-icon fontSet="material-icons-outlined">info</mat-icon>
            </span>

          </ng-container>

          <span *ngIf="merchantEmailAvaibilityText !== 'Email is Available' && merchantEmailAvaibilityText !== ''" matTooltipClass="downline"
            matTooltip="Email id already present, please try another" aria-label="Email Id Already Present" class="mandatory-alert">
            <mat-icon fontSet="material-icons-outlined">info</mat-icon>
          </span>

        </mat-form-field>


        <ng-container *ngIf="approveMode">
          <mat-hint align="start" class="request_class" *ngIf="requestObj['primaryEmail']">
            <span *ngIf="requestObj['primaryEmail'] !== basicDetailsForm.get('primaryEmail').value">Requested Change: {{requestObj['primaryEmail']}}
            </span>
          </mat-hint>
        </ng-container>
        <mat-hint>{{merchantEmailAvaibilityText}}</mat-hint>
      </div>

      <div class="col-sm-6">
        <mat-form-field appearance="outline">
          <mat-label>Select Delivery Status
            <span matTooltip="This field is Required" aria-label="This field is Required" class="mandatory">*</span>
          </mat-label>
          <mat-select #deliveryStatus (selectionChange)='onDeliveryRequestStatusChanged(deliveryStatus.value)' formControlName="deliveryRequestStatus"
            [value]="basicDetailsForm.get('deliveryRequestStatus').value">
            <ng-container *ngIf="storeType">
              <mat-option [value]="storeStatus.statusKey" *ngFor="let storeStatus of deliveryRequetStatusList">
                {{storeStatus.statusValue}}</mat-option>
            </ng-container>
          </mat-select>

          <span *ngIf="!basicDetailsForm.get('deliveryRequestStatus').valid && basicDetailsForm.get('deliveryRequestStatus').touched && basicDetailsForm.get('deliveryRequestStatus').hasError('required')"
            matTooltipClass="downline" matTooltip="This field is Required" aria-label="This field is Required" class="mandatory-alert">
            <mat-icon fontSet="material-icons-outlined">info</mat-icon>
          </span>
        </mat-form-field>
      </div>



      <div class="col-sm-6">
        <mat-form-field appearance="outline">
          <mat-label>Store Local Listing Range (In KM)
            <span matTooltip="This field is Required" aria-label="This field is Required" class="mandatory">*</span>
          </mat-label>
          <input type="text" autocomplete="nope" formControlName="localListingRange" matInput numbersOnly trim="blur" />

          <span *ngIf="basicDetailsForm.get('localListingRange').invalid" matTooltipClass="downline"
            matTooltip="This Field Is Required" aria-label="This field is Required" class="mandatory-alert">
            <mat-icon fontSet="material-icons-outlined">info</mat-icon>
          </span>

        </mat-form-field>
      </div>

      <div class="col-sm-12">
        <mat-form-field appearance="outline">

          <mat-label>Remarks
            <span matTooltip="This field is Required" aria-label="This field is Required" class="mandatory">*</span>
          </mat-label>
          <textarea matInput formControlName="remarks" trim="blur"></textarea>

          <span *ngIf="basicDetailsForm.get('remarks').invalid" matTooltipClass="downline"
            matTooltip="This Field Is Required" aria-label="This field is Required" class="mandatory-alert">
            <mat-icon fontSet="material-icons-outlined">info</mat-icon>
          </span>

        </mat-form-field>

        <ng-container *ngIf="approveMode">
          <mat-hint align="start" class="request_class" *ngIf="requestObj['remarks']">
            <span *ngIf="requestObj['remarks'] !== basicDetailsForm.get('remarks').value">Requested Change: {{requestObj['remarks']}}
            </span>
          </mat-hint>
        </ng-container>
      </div>



      <div class="col-sm-6 form-content-body">
        <div class="offset-1">
          <div class="upload-image-view">
            <img *ngIf="basicDetailsForm.get('storeLogoUrl') && basicDetailsForm.get('storeLogoUrl').value && checkExtension(basicDetailsForm.get('storeLogoUrl').value)!='pdf'"
              height="99%" width="99%" [src]="basicDetailsForm.get('storeLogoUrl').value" />
            <img *ngIf="basicDetailsForm.get('storeLogoUrl') && basicDetailsForm.get('storeLogoUrl').value && checkExtension(basicDetailsForm.get('storeLogoUrl').value)=='pdf'"
              height="99%" width="99%" src="../../../../../../assets/img/pdf.png" />
            <br />
          </div>
        </div>
      </div>



      <!-- <div class="col-sm-6">
        <div class="row">
          <div class="col-sm-6">
            <mat-checkbox class="p-3" formControlName="allowLocalListing"></mat-checkbox>
            <mat-label>Store Allow Local Listing
            </mat-label>
          </div>
          <div class="col-sm-6">
            <mat-checkbox class="p-3" formControlName="isActive"></mat-checkbox>
            <mat-label>Active Store
            </mat-label>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-6">
            <mat-checkbox class="p-3" formControlName="multiBrandStore"></mat-checkbox>
            <mat-label>Is Multi Brande
            </mat-label>
          </div>
          <div class="col-sm-6">
            <mat-checkbox class="p-3" formControlName="storePickup"></mat-checkbox>
            <mat-label>Store Pickup
            </mat-label>
          </div>
        </div>

        <div class="row">

          <div class="col-sm-6">
            <mat-checkbox class="p-3" formControlName="allowMarketplace"></mat-checkbox>
            <mat-label>Store Allow Market Place
            </mat-label>
          </div>

          <div class="col-sm-6">
            <mat-checkbox class="p-3" formControlName="homedelivery"></mat-checkbox>
            <mat-label>Home Delivery
            </mat-label>
          </div>

        </div>

        <div class="row">
          <div class="col-sm-6">
            <mat-checkbox class="p-3" formControlName="allowCartWithOthers"></mat-checkbox>
            <mat-label>Allow Cart With Others
            </mat-label>
          </div>

        </div>
      </div> -->


      <div class="col-sm-8 mt-4">
        <mat-form-field appearance="outline">

          <mat-label>Full Address
            <span matTooltip="This field is Required" aria-label="This field is Required" class="mandatory">*</span>
          </mat-label>
          <textarea matInput [readonly]="true" formControlName="address" trim="blur"></textarea>

          <span *ngIf="!basicDetailsForm.get('address').valid && basicDetailsForm.get('address').touched" matTooltipClass="downline"
            matTooltip="This Field Is Required" aria-label="This field is Required" class="mandatory-alert">
            <mat-icon fontSet="material-icons-outlined">info</mat-icon>
          </span>

        </mat-form-field>

        <ng-container *ngIf="approveMode">
          <mat-hint align="start" class="request_class" *ngIf="requestObj['address']">
            <span *ngIf="requestObj['address'] !== basicDetailsForm.get('address').value">Requested Change: {{requestObj['address']}}
            </span>
          </mat-hint>
        </ng-container>
      </div>

      <div class="col-sm-4 mt-4">
        <mat-form-field appearance="outline">

          <mat-label>Short Address
            <span matTooltip="This field is Required" aria-label="This field is Required" class="mandatory">*</span>
          </mat-label>
          <textarea matInput [readonly]="true" formControlName="shortAddress" trim="blur"></textarea>

          <span *ngIf="!basicDetailsForm.get('shortAddress').valid && basicDetailsForm.get('shortAddress').touched" matTooltipClass="downline"
            matTooltip="This Field Is Required" aria-label="This field is Required" class="mandatory-alert">
            <mat-icon fontSet="material-icons-outlined">info</mat-icon>
          </span>

        </mat-form-field>

        <ng-container *ngIf="approveMode">
          <mat-hint align="start" class="request_class" *ngIf="requestObj['shortAddress']">
            <span *ngIf="requestObj['shortAddress'] !== basicDetailsForm.get('shortAddress').value">Requested Change: {{requestObj['shortAddress']}}
            </span>
          </mat-hint>
        </ng-container>
      </div>

      <div class="col-sm-6">
        <mat-form-field appearance="outline">
          <mat-label>Landmark</mat-label>
          <input matInput [readonly]="true" formControlName="landmark" trim="blur" />
        </mat-form-field>
        <ng-container *ngIf="approveMode">
          <mat-hint align="start" class="request_class" *ngIf="requestObj['landmark']">
            <span *ngIf="requestObj['landmark'] !== basicDetailsForm.get('landmark').value">Requested Change: {{requestObj['landmark']}}
            </span>
          </mat-hint>
        </ng-container>
      </div>
      <div class="col-sm-6">
        <mat-form-field appearance="outline">
          <mat-label>City
            <span matTooltip="This field is Required" aria-label="This field is Required" class="mandatory">*</span>
          </mat-label>
          <input [readonly]="true" matInput formControlName="city" trim="blur" />
          <span *ngIf="!basicDetailsForm.get('city').valid && basicDetailsForm.get('city').touched" matTooltipClass="downline" matTooltip="This field is Required"
            aria-label="This field is Required" class="mandatory-alert">
            <mat-icon fontSet="material-icons-outlined">info</mat-icon>
          </span>
        </mat-form-field>

        <ng-container *ngIf="approveMode">
          <mat-hint align="start" class="request_class" *ngIf="requestObj['city']">
            <span *ngIf="requestObj['city'] !== basicDetailsForm.get('city').value">Requested Change: {{requestObj['city']}}
            </span>
          </mat-hint>
        </ng-container>
      </div>

      <div class="col-sm-6">
        <mat-form-field appearance="outline">
          <mat-label>ZIP Code
            <span matTooltip="This field is Required" aria-label="This field is Required" class="mandatory">*</span>
          </mat-label>
          <input [readonly]="true" matInput type="number" formControlName="zipCode" trim="blur" />

          <ng-container *ngIf="!basicDetailsForm.get('zipCode').valid && basicDetailsForm.get('zipCode').touched">

            <span *ngIf="basicDetailsForm.get('zipCode').hasError('required')" matTooltipClass="downline" matTooltip="This field is Required"
              aria-label="This field is Required" class="mandatory-alert">
              <mat-icon fontSet="material-icons-outlined">info</mat-icon>
            </span>

            <span *ngIf="basicDetailsForm.get('zipCode').hasError('pattern')" matTooltipClass="downline" matTooltip="Invalid Pincode"
              aria-label="This field is Required" class="mandatory-alert">
              <mat-icon fontSet="material-icons-outlined">info</mat-icon>
            </span>

          </ng-container>

        </mat-form-field>
      </div>
      <div class="col-sm-6">
        <mat-form-field appearance="outline">
          <mat-label>Region Name
            <span matTooltip="This field is Required" aria-label="This field is Required" class="mandatory">*</span>
          </mat-label>
          <input matInput [readonly]="true" formControlName="regionName" trim="blur" />

          <ng-container *ngIf="!basicDetailsForm.get('regionName').valid && basicDetailsForm.get('regionName').touched">

            <span *ngIf="basicDetailsForm.get('regionName').hasError('regionName')" matTooltipClass="downline" matTooltip="This field is Required"
              aria-label="This field is Required" class="mandatory-alert">
              <mat-icon fontSet="material-icons-outlined">info</mat-icon>
            </span>

            <span *ngIf="basicDetailsForm.get('regionName').hasError('pattern')" matTooltipClass="downline" matTooltip="Invalid Pincode"
              aria-label="This field is Required" class="mandatory-alert">
              <mat-icon fontSet="material-icons-outlined">info</mat-icon>
            </span>

          </ng-container>
        </mat-form-field>
      </div>


      <div class="col-sm-6">
        <mat-form-field appearance="outline">
          <mat-label>Store Latitude
            <span matTooltip="This field is Required" aria-label="This field is Required" class="mandatory">*</span>
          </mat-label>
          <input [readonly]="true" matInput formControlName="geoLat" trim="blur" />
        </mat-form-field>
      </div>
      <div class="col-sm-6">
        <mat-form-field appearance="outline">
          <mat-label>Store Longitude
            <span matTooltip="This field is Required" aria-label="This field is Required" class="mandatory">*</span>
          </mat-label>
          <input [readonly]="true" matInput formControlName="geoLong" trim="blur" />
        </mat-form-field>
      </div>

      <div class="col-12">
        <div class="border border-primary">
          <agm-map [scrollwheel]="false" [zoom]="13" [latitude]="map.lat" [longitude]="map.lng" style="height: 310px">
            <agm-marker [latitude]="map.lat" [longitude]="map.lng" [markerDraggable]="false"></agm-marker>
          </agm-map>
        </div>
      </div>

      <div class="col-sm-12 mt-4">
        <ng-container *ngIf="selectedStoreDaysOperationList && selectedStoreDaysOperationList.length>0">
          <div class="col-12 mt-1">
            <table class="table layout-fixed box-shadow">
              <thead>
                <tr>
                  <th class="widthP20 text-center">Day</th>
                  <th class="widthP30 text-center">Open Time</th>
                  <th class="widthP30 text-center">Closing Time</th>
                  <th class="widthP10 text-center">Is StoreOpen</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let storeOperation of selectedStoreDaysOperationList">
                  <td>
                    <a class="mt-5" href="javascript:();">
                      <p class="text-center">{{storeOperation.dayName | uppercase }}</p>
                    </a>
                  </td>
                  <td class="hierarchy-p">
                    <a href="javascript:();">
                      <p class="text-center">{{storeOperation.openTime | date:'shortTime' }}</p>
                    </a>
                  </td>
                  <td class="hierarchy-p">
                    <a href="javascript:();">
                      <p class="text-center">{{storeOperation.closeTime | date:'shortTime'}}</p>
                    </a>
                  </td>
                  <td class="hierarchy-p">
                    <a href="javascript:();">
                      <p class="text-center">
                        <mat-icon *ngIf="storeOperation.isOpen">lock_open</mat-icon>
                        <mat-icon *ngIf="!storeOperation.isOpen">lock</mat-icon>
                      </p>
                    </a>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </ng-container>
      </div>

      <div class="col-sm-6 mt-4">
        <mat-form-field appearance="outline">
          <mat-label>Store Type
            <span matTooltip="This field is Required" aria-label="This field is Required" class="mandatory">*</span>
          </mat-label>
          <mat-select formControlName="storeType" [value]="basicDetailsForm.get('storeType').value" [disabled]="true">
            <ng-container *ngIf="storeType">
              <mat-option [value]="storeTy.store_type" *ngFor="let storeTy of storeType">
                {{storeTy.store_type}}</mat-option>
            </ng-container>
          </mat-select>

          <span *ngIf="!basicDetailsForm.get('storeType').valid && basicDetailsForm.get('storeType').touched && basicDetailsForm.get('storeType').hasError('required')"
            matTooltipClass="downline" matTooltip="This field is Required" aria-label="This field is Required" class="mandatory-alert">
            <mat-icon fontSet="material-icons-outlined">info</mat-icon>
          </span>
        </mat-form-field>
      </div>

      <div class="col-sm-6 mt-4">
        <mat-form-field appearance="outline">
          <mat-label>Merchant Category
            <span matTooltip="This field is Required" aria-label="This field is Required" class="mandatory">*</span>
          </mat-label>
          <mat-select formControlName="businessCategoryId" [value]="basicDetailsForm.get('businessCategoryId').value" [disabled]="true">
            <ng-container *ngIf="detailsList.buisnessCategory">
              <mat-option [value]="sellerType.id" *ngFor="let sellerType of detailsList.buisnessCategory.payload">
                {{sellerType.businessCategoryName}}</mat-option>
            </ng-container>
          </mat-select>

          <span *ngIf="!basicDetailsForm.get('businessCategoryId').valid && basicDetailsForm.get('businessCategoryId').touched && basicDetailsForm.get('businessCategoryId').hasError('required')"
            matTooltipClass="downline" matTooltip="This field is Required" aria-label="This field is Required" class="mandatory-alert">
            <mat-icon fontSet="material-icons-outlined">info</mat-icon>
          </span>
        </mat-form-field>

        <ng-container *ngIf="approveMode">
          <mat-hint align="start" class="request_class" *ngIf="requestObj['businessCategoryId']">
            <span *ngIf="requestObj['businessCategoryId'] !== basicDetailsForm.get('businessCategoryId').value">Requested Change: {{getValueForDropDownInApprove('buisnessCategory',requestObj['businessCategoryId'],'businessCategoryName','id')}}
            </span>
          </mat-hint>
        </ng-container>
      </div>

    </div>
  </form>
</div>